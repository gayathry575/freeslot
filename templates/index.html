<!DOCTYPE html> 
<html>
<head>
    <title> Slot Checker</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            background: linear-gradient(135deg, #fcefee, #fff8f6, #f4f4f9);
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .container { 
            margin: 30px auto; 
            padding: 25px; 
            background: white; 
            border-radius: 12px; 
            width: 420px; 
            box-shadow: 0px 6px 18px rgba(0,0,0,0.1);
        }

        select, button { 
            padding: 10px; 
            margin: 8px 0; 
            width: 90%; 
            border-radius: 6px; 
            border: 1px solid #ccc;
        }

        h2 { 
            color: #8b0000; 
            margin-bottom: 15px; 
        }

        .logo img { 
            display: block; 
            margin: 20px auto; 
            width: 220px; 
        }

        .btn { 
            background-color: #8b0000; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn:hover { 
            background-color: #a00000; 
            transform: scale(1.05);
        }

        .time-select {
            display: flex;
            justify-content: space-between;
            gap: 5px;
            align-items: center;
        }
        .time-select select {
            flex: 1;
        }
        .colon {
            font-weight: bold;
            font-size: 18px;
        }

        /* Green box for free slots */
        .success-box {
            background-color: #d4f8d4; 
            border: 2px solid green;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: left;
        }
        .success-box h3 {
            color: green;
            margin-top: 0;
        }

        /* Red box for occupied slots */
        .error-box {
            background-color: #f8d4d4; 
            border: 2px solid red;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: left;
        }
        .error-box h3 {
            color: red;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <!-- Amrita Logo -->
    <div class="logo">
        <img src="{{ url_for('static', filename='amrita-logo.png') }}" alt="Amrita Logo">
    </div>

    <div class="container">
        <h2> Slot Checker</h2>
        <form method="POST" onsubmit="combineTime()">
            
            <!-- Day Dropdown -->
            <label for="day">Select Day</label>
            <select name="day" id="day" required>
                <option value="">-- Select Day --</option>
                <option value="Monday">Monday</option>
                <option value="Tuesday">Tuesday</option>
                <option value="Wednesday">Wednesday</option>
                <option value="Thursday">Thursday</option>
                <option value="Friday">Friday</option>
            </select>

            <!-- Time Dropdown -->
            <label for="time">Select Time</label>
            <div class="time-select">
                <select id="hour" required>
                    <option value="">Hour</option>
                    {% for h in range(0,24) %}
                        <option value="{{'%02d' % h}}">{{'%02d' % h}}</option>
                    {% endfor %}
                </select>

                <span class="colon">:</span>

                <select id="minute" required>
                    <option value="">Min</option>
                    {% for m in range(0,60) %}
                        <option value="{{'%02d' % m}}">{{'%02d' % m}}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Hidden field that will hold final formatted time -->
            <input type="hidden" name="time" id="time">

            <button type="submit" class="btn">Check Slots</button>
        </form>

        {% if error %}
            <p style="color:red;">{{ error }}</p>
        {% endif %}

        {% if results %}
            {% if results.free %}
                <div class="success-box">
                    <h3>Free Slots</h3>
                    <ul>
                    {% for room in results.free %}
                        <li>{{ room.Department }} - {{ room.Block }} - {{ room.Classroom }} ({{ room.Slot }})</li>
                    {% endfor %}
                    </ul>
                </div>
            {% endif %}

            {% if results.occupied %}
                <div class="error-box">
                    <h3>Classes Ongoing</h3>
                    <ul>
                    {% for room in results.occupied %}
                        <li>{{ room.Department }} - {{ room.Block }} - {{ room.Classroom }} : {{ room.Subject }} ({{ room.Slot }})</li>
                    {% endfor %}
                    </ul>
                </div>
            {% endif %}
        {% endif %}
    </div>

    <script>
        function combineTime() {
            const hour = document.getElementById("hour").value;
            const minute = document.getElementById("minute").value;
            if (hour && minute) {
                document.getElementById("time").value = hour + ":" + minute;
            }
        }
    </script>
</body>
</html>